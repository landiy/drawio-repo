<mxfile host="app.diagrams.net" modified="2021-07-25T08:38:57.061Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36" etag="Oexy5FJxA1Ek_SaETAZP" version="14.9.2" type="github">
  <diagram id="roLH6djR0Ad1zbqObZgL" name="Page-1">
    <mxGraphModel dx="1298" dy="810" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="8qRryWJjBkHPUPW2f3cR-10" value="&lt;span&gt;master Web&lt;/span&gt;&lt;br&gt;&lt;span&gt;(主应用)&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="280" width="80" height="1280" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-74" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="8qRryWJjBkHPUPW2f3cR-10" vertex="1">
          <mxGeometry x="25" y="900" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-12" value="&lt;span&gt;Google Auth&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="360" y="280" width="100" height="1280" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-23" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="8qRryWJjBkHPUPW2f3cR-12" vertex="1">
          <mxGeometry x="45" y="80" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-13" value="&lt;span&gt;portal Node&lt;/span&gt;&lt;br&gt;&lt;span&gt;（主应用）&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="240" y="280" width="100" height="1280" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-14" value="&lt;span&gt;SOUP&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="840" y="280" width="100" height="1160" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-15" value="&lt;span&gt;mysql&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="720" y="280" width="100" height="1280" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-16" value="&lt;span&gt;UC Node&lt;/span&gt;&lt;br&gt;&lt;span&gt;（子应用）&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="600" y="280" width="100" height="1280" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-17" value="&lt;span&gt;UC&amp;nbsp;&lt;/span&gt;&lt;span&gt;Web&lt;/span&gt;&lt;br&gt;&lt;span&gt;（子应用）&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="480" y="280" width="100" height="1280" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-24" value="弹出Google弹窗" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" source="8qRryWJjBkHPUPW2f3cR-10" target="8qRryWJjBkHPUPW2f3cR-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="300" y="440" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-25" value="返回&amp;nbsp;&lt;b&gt;令牌&lt;/b&gt;" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="8qRryWJjBkHPUPW2f3cR-23" target="8qRryWJjBkHPUPW2f3cR-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="300" y="516" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-26" value="&lt;span style=&quot;font-size: 11px ; background-color: rgb(255 , 255 , 255)&quot;&gt;/login 接口&lt;/span&gt;" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="285" y="520" width="10" height="320" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-27" value="发起请求&lt;br&gt;发送令牌" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.1;entryY=0.006;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="8qRryWJjBkHPUPW2f3cR-10" target="8qRryWJjBkHPUPW2f3cR-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="160" y="480" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-28" value="将token种&lt;br&gt;到cookie里" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.993;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="8qRryWJjBkHPUPW2f3cR-26" target="8qRryWJjBkHPUPW2f3cR-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="556" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-31" value="令牌" style="html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;" parent="1" target="8qRryWJjBkHPUPW2f3cR-12" edge="1">
          <mxGeometry width="60" relative="1" as="geometry">
            <mxPoint x="300" y="550" as="sourcePoint" />
            <mxPoint x="360" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-32" value="返回用户信息" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="1" source="8qRryWJjBkHPUPW2f3cR-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="610" as="sourcePoint" />
            <mxPoint x="295" y="610" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-34" value="将用户信息&lt;br&gt;进行jwt加密&lt;br&gt;生成一个 token" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" parent="1" edge="1">
          <mxGeometry x="0.8095" y="-30" relative="1" as="geometry">
            <mxPoint x="300" y="660" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="360" y="660" />
              <mxPoint x="360" y="750" />
            </Array>
            <mxPoint x="300" y="750" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-40" value="用户点击登录&lt;br&gt;后的前端逻辑" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="155" y="350" width="10" height="650" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-41" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="409" y="545" width="10" height="65" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-42" value="跳转到子应用" style="html=1;verticalAlign=bottom;endArrow=block;" parent="1" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="165" y="1190" as="sourcePoint" />
            <mxPoint x="518" y="1190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-54" value="check_logined 接口" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="643" y="1193" width="10" height="250" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-55" value="发送请求，&lt;br&gt;携带cookie" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" target="8qRryWJjBkHPUPW2f3cR-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="527.5" y="1193" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-56" value="返回用户权限树" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="8qRryWJjBkHPUPW2f3cR-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="527.5" y="1430.4999999999995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-59" value="对cookie 里的 &lt;br&gt;token 进行 jwt 解密&lt;br&gt;获取用户信息" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="653" y="1213.03" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="683" y="1213" />
              <mxPoint x="683" y="1233" />
            </Array>
            <mxPoint x="658" y="1233.0299999999997" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-63" value="" style="html=1;verticalAlign=bottom;endArrow=block;exitX=1.3;exitY=0.372;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="8qRryWJjBkHPUPW2f3cR-54" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="653" y="1353" as="sourcePoint" />
            <mxPoint x="767.5" y="1286" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-64" value="查询全部权限" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="668" y="1263" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-65" value="查询用户所拥有的权限" style="html=1;verticalAlign=bottom;endArrow=block;" parent="1" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="658" y="1363" as="sourcePoint" />
            <mxPoint x="888" y="1363" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-67" value="两者做交集，获取用&lt;br&gt;户真正拥有的权限" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="653" y="1393" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="683" y="1393" />
            </Array>
            <mxPoint x="658" y="1413" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-72" value="首页展示用户权限树" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="470" y="1450" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-73" value="&lt;font style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;用户登录逻辑（主&amp;amp;子应用交互）&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="400" y="230" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-75" value="用户点击UC子应用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="110" y="1160" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-79" value="/check_logined&lt;br&gt;接口" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="285" y="870" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-80" value="发起请求" style="html=1;verticalAlign=bottom;endArrow=block;" parent="1" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="165" y="880" as="sourcePoint" />
            <mxPoint x="280" y="880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-83" value="对cookie 里的&lt;br&gt;token 进行 jwt 解密&lt;br&gt;获取用户信息" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=0.967;entryY=0.833;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="8qRryWJjBkHPUPW2f3cR-79" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="295" y="890" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="350" y="890" />
              <mxPoint x="350" y="970" />
            </Array>
            <mxPoint x="300" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-84" value="返回用户信息" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.033;exitY=0.965;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="8qRryWJjBkHPUPW2f3cR-79" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="283" y="965" as="sourcePoint" />
            <mxPoint x="170" y="986" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8qRryWJjBkHPUPW2f3cR-85" value="&lt;span style=&quot;font-size: 11px ; background-color: rgb(255 , 255 , 255)&quot;&gt;用户信息展示在主应用Header&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="75" y="1010" width="170" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
